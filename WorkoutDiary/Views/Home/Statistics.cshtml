@model IEnumerable<WorkoutDiary.Models.Workout>

@{
    ViewBag.Title = "Statistics";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Statistics</h2>



@*<div class="container">
    <div class="row"><div id="runningChartContainer"></div></div>
    <div id="swimmingChartContainer" style="float:left"></div>
</div>*@
<div class="container">
    <div class="row">
        <div class="col-sm">
            One of three columns
        </div>
        <div class="col-sm">
            One of three columns
        </div>
        <div class="col-sm">
            One of three columns
        </div>
    </div>
</div>


<script type="text/javascript">
    $(document).ready(function () {
        var runningData = [];
        var swimmingData = [];

        $.get("/api/workouts", function (data) {

            $.each(data, function (a, b) {

                if (b.WorkoutType.Name == "Running") {
                    runningData.push({
                        x: new Date(b.DateInString), y: b.Distance
                    });
                }

                if (b.WorkoutType.Name == "Swimming") {
                    swimmingData.push({
                        x: new Date(b.DateInString), y: b.Distance
                    });
                }
            });

            var runningChart = new CanvasJS.Chart("runningChartContainer", {
                title: {
                    text: "Running Data"
                },
                axisX: {
                    title: "Date"
                },
                axisY: {
                    includeZero: true,
                    title: "Distance (km)"
                },
                data: [{
                    type: "splineArea",
                    color: "rgba(62,172,54,.7)",
                    dataPoints: runningData
                }]
            });
            runningChart.render();

            var swimmingChart = new CanvasJS.Chart("swimmingChartContainer", {
                title: {
                    text: "Swimming Data"
                },
                axisX: {
                    title: "Date"
                },
                axisY: {
                    includeZero: true,
                    title: "Distance (km)"
                },
                data: [{
                    type: "splineArea",
                    color: "rgba(54,167,172,.7)",
                    dataPoints: swimmingData
                }]
            });
            swimmingChart.render();
        });
    });
</script>

